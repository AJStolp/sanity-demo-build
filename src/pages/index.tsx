import Head from "next/head";
// hook isnt really needed with server side
// import useFetchData from "@/hooks/fetch";
import { IStrain } from "@/interfaces/IStrain";
import axios from "axios";
import { fetchStrains } from "@/static-props/fetched-strains";

export default function Home({
  fetchedData,
}: {
  fetchedData: { name: string }[];
}) {
  // const PROJECT_ID = "qosix616";
  // const DATASET = "production";
  // const QUERY = encodeURIComponent('*[_type == "strain"]');

  // // Compose the URL for your project's endpoint and add the query
  // const sanityApi = `https://${PROJECT_ID}.api.sanity.io/v2021-10-21/data/query/${DATASET}?query=${QUERY}`;

  // const { fetchedData }: { fetchedData: IStrain[] } = useFetchData({
  //   url: sanityApi,
  // });
  return (
    <>
      <Head>
        <title>My Sanity Demo</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="">
        <div>
          {fetchedData.map((val, index) => {
            return (
              <div key={index}>
                <h3>{val.name}</h3>
              </div>
            );
          })}
        </div>
      </main>
    </>
  );
}
export async function getStaticProps() {
  const fetchedData = await fetchStrains();
  return { props: { fetchedData } };
}
